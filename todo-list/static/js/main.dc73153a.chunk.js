(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[0],{20:function(e,t,i){},22:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i.n(n),c=i(6),a=i.n(c),l=i(2),r=i(3),o=i(11),d=function(e){localStorage.setItem("tasks",JSON.stringify(e))},u=Object(r.b)({name:"tasks",initialState:[],reducers:{createTask:function(e,t){var i=t.payload.text;e.push({id:Object(r.c)(),text:i,completed:!1}),d(e)},deleteTask:function(e,t){var i=t.payload.taskId;e.splice(e.findIndex((function(e){return e.id===i})),1),d(e)},deleteCompletedTasks:function(e,t){var i=e.filter((function(e){return!e.completed}));e.splice(0,e.length),e.push.apply(e,Object(o.a)(i)),d(e)},editTask:function(e,t){var i=t.payload,n=i.taskId,s=i.newText;e.find((function(e){return e.id===n})).text=s,d(e)},toggleCompleted:function(e,t){var i=t.payload.taskId,n=e.find((function(e){return e.id===i}));n.completed=!n.completed,d(e)},loadTasksFromStorage:function(e,t){var i=JSON.parse(localStorage.getItem("tasks"));i&&Array.isArray(i)&&(e.splice(0,e.length),e.push.apply(e,Object(o.a)(i)))}}}),b=function(e){return e.tasks},j=function(e){return e.tasks.filter((function(e){return e.completed}))},f=function(e,t,i){switch(t){case"all":return e.tasks.filter((function(e){return e.text.includes(i)}));case"completed":return e.tasks.filter((function(e){return e.completed&&e.text.includes(i)}));case"not_completed":return e.tasks.filter((function(e){return!e.completed&&e.text.includes(i)}))}},k=u.actions,m=k.createTask,h=k.deleteTask,_=k.editTask,p=k.toggleCompleted,O=k.deleteCompletedTasks,x=k.loadTasksFromStorage,g=u.reducer,w=Object(r.b)({name:"ui",initialState:{createTaskWindowVisibility:!1,editTaskWindowVisibility:!1,selectedEditingTaskId:null,searchText:"",filter:"all"},reducers:{toggleCreateTaskWindowVisibility:function(e,t){e.createTaskWindowVisibility=!e.createTaskWindowVisibility},toggleEditTaskWindowVisibility:function(e,t){e.editTaskWindowVisibility=!e.editTaskWindowVisibility},toggleSelectedEditingTaskId:function(e,t){var i=t.payload.taskId;e.selectedEditingTaskId=i},setSearchText:function(e,t){var i=t.payload.value;e.searchText=i},setFilter:function(e,t){var i=t.payload.to;e.filter=i}}}),T=function(e){return e.ui.createTaskWindowVisibility},v=function(e){return e.ui.editTaskWindowVisibility},N=function(e){return e.ui.selectedEditingTaskId},y=function(e){return e.ui.searchText},C=function(e){return e.ui.filter},S=w.actions,I=S.toggleCreateTaskWindowVisibility,E=S.toggleEditTaskWindowVisibility,V=S.toggleSelectedEditingTaskId,W=S.setSearchText,F=S.setFilter,L=w.reducer,R=Object(r.a)({reducer:{tasks:g,ui:L}}),D=(i(20),i(4)),J=i(0),A=Object(l.b)((function(e){return{}}),{})((function(e){return Object(J.jsx)("div",{className:"shade ".concat(!e.visibility&&"shade__hidden"),onClick:function(){e.onClick()}})})),M={toggleCreateTaskWindowVisibility:I,createTask:m},q=Object(l.b)((function(e){return{visibility:T(e)}}),M)((function(e){var t=Object(n.useState)(""),i=Object(D.a)(t,2),s=i[0],c=i[1],a=Object(n.useState)(!1),l=Object(D.a)(a,2),r=l[0],o=l[1],d=Object(n.useRef)(null);Object(n.useEffect)((function(){e.visibility&&d.current.focus()}),[e.visibility]);var u=function(){c(""),o(!1),e.toggleCreateTaskWindowVisibility()};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"create-task-window ".concat(!e.visibility&&"create-task-window--hidden"),children:[Object(J.jsxs)("div",{className:"create-task-window__header",children:[Object(J.jsx)("h2",{className:"create-task-window__title h4",children:"Create Task"}),Object(J.jsx)("button",{onClick:u,className:"create-task-window__close-btn",type:"button",children:Object(J.jsx)("span",{className:"create-task-window__close-icon material-icons-outlined",children:"close"})})]}),Object(J.jsxs)("form",{className:"create-task-window__form",onSubmit:function(t){if(t.preventDefault(),!s.trim())return o(!0);e.createTask({text:s.trim()}),u()},children:[Object(J.jsx)("div",{className:"create-task-window__text-input-wrapper ".concat(r&&"create-task-window__text-input-wrapper--error"),children:Object(J.jsx)("input",{value:s,onChange:function(e){return c(e.target.value)},className:"create-task-window__text-input",placeholder:"Task",ref:d})}),Object(J.jsx)("button",{type:"submit",className:"create-task-window__submit-btn",children:"Create"})]})]}),Object(J.jsx)(A,{visibility:e.visibility,onClick:u})]})})),B={toggleEditTaskWindowVisibility:E,editTask:_,toggleSelectedEditingTaskId:V},U=Object(l.b)((function(e){return{visibility:v(e),taskId:N(e)}}),B)((function(e){var t=Object(n.useState)(""),i=Object(D.a)(t,2),s=i[0],c=i[1],a=Object(n.useState)(!1),l=Object(D.a)(a,2),r=l[0],o=l[1],d=Object(n.useRef)(null);Object(n.useEffect)((function(){e.visibility&&d.current.focus()}),[e.visibility]);var u=function(){c(""),o(!1),e.toggleEditTaskWindowVisibility(),e.toggleSelectedEditingTaskId({taskId:null})};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"edit-task-window ".concat(!e.visibility&&"edit-task-window--hidden"),children:[Object(J.jsxs)("div",{className:"edit-task-window__header",children:[Object(J.jsx)("h2",{className:"edit-task-window__title h4",children:"Edit Task"}),Object(J.jsx)("button",{type:"button",className:"edit-task-window__close-btn",onClick:u,children:Object(J.jsx)("span",{className:"edit-task-window__close-icon material-icons-outlined",children:"close"})})]}),Object(J.jsxs)("form",{className:"edit-task-window__form",onSubmit:function(t){if(t.preventDefault(),!s.trim())return o(!0);e.editTask({taskId:e.taskId,newText:s}),u()},children:[Object(J.jsx)("div",{className:"edit-task-window__text-input-wrapper ".concat(r&&"edit-task-window__text-input-wrapper--error"),children:Object(J.jsx)("input",{value:s,onChange:function(e){return c(e.target.value)},className:"edit-task-window__text-input",placeholder:"New text",ref:d})}),Object(J.jsx)("button",{type:"submit",className:"edit-task-window__submit-btn",children:"Edit Task"})]})]}),Object(J.jsx)(A,{visibility:e.visibility,onClick:u})]})})),z={deleteCompletedTasks:O},G=Object(l.b)((function(e){return{completedCount:j(e).length,length:b(e).length}}),z)((function(e){var t=Object(n.useRef)(null),i=function(e){e.classList.remove("footer__delete-btn--scale-up"),e.classList.remove("footer__delete-btn--scale-down")},s=e.completedCount===e.length;return Object(J.jsxs)("footer",{className:"footer",children:[Object(J.jsxs)("span",{className:"footer__stat ".concat(s?"footer__stat--completed":"footer__stat--not-completed"),children:["Completed: ",e.completedCount,"/",e.length]}),Object(J.jsx)("button",{type:"button",className:"footer__delete-btn",onClick:function(){e.deleteCompletedTasks()},onMouseDown:function(e){i(e.target),e.target.classList.add("footer__delete-btn--scale-down")},onMouseUp:function(e){i(e.target),e.target.classList.add("footer__delete-btn--scale-up")},ref:t,children:"Delete completed"})]})})),H={toggleCreateTaskWindowVisibility:I},K=Object(l.b)((function(e){return{}}),H)((function(e){return Object(J.jsxs)("header",{className:"header",children:[Object(J.jsx)("h1",{className:"header__title h3",children:"Todo-List"}),Object(J.jsx)("div",{className:"header__right",children:Object(J.jsx)("button",{type:"button",className:"header__add-btn",onClick:function(){e.toggleCreateTaskWindowVisibility()},children:Object(J.jsx)("span",{className:"header__add-icon material-icons",children:"add"})})})]})})),P={setFilter:F},Q=Object(l.b)((function(e){return{filter:C(e)}}),P)((function(e){var t=Object(n.useState)(!1),i=Object(D.a)(t,2),s=i[0],c=i[1];Object(n.useEffect)((function(){document.addEventListener("click",(function(e){document.querySelector(".filter__select").contains(e.target)||c(!1)}))}),[]);var a=[{filter:"all",content:"All"},{filter:"completed",content:"Completed"},{filter:"not_completed",content:"Not completed"}];return Object(J.jsx)("div",{className:"filter",children:Object(J.jsxs)("div",{className:"filter__select",children:[Object(J.jsxs)("button",{type:"button",className:"filter__select-btn",onClick:function(){return c(!s)},children:[Object(J.jsx)("span",{className:"filter__select-btn-text",children:a.find((function(t){return t.filter===e.filter})).content}),Object(J.jsx)("span",{class:"filter__arrow-icon material-icons-outlined ".concat(s&&"filter__arrow-icon--rotated"),children:"expand_more"})]}),Object(J.jsx)("ul",{className:"filter__dropdown ".concat(!s&&"filter__dropdown--hidden"),children:a.map((function(t){return Object(J.jsx)("li",{className:"filter__dropdown-item ".concat(e.filter===t.filter&&"filter__dropdown-item--selected"),onClick:function(){return i=t.filter,e.setFilter({to:i}),void c(!1);var i},children:t.content},t.filter)}))})]})})})),X={setSearchText:W},Y=Object(l.b)((function(e){return{value:y(e)}}),X)((function(e){return Object(J.jsxs)("div",{className:"search",children:[Object(J.jsx)("span",{className:"search__search-icon material-icons-outlined",children:"search"}),Object(J.jsx)("input",{className:"search__input",value:e.value,onChange:function(t){return e.setSearchText({value:t.target.value})},placeholder:"Search"})]})})),Z={deleteTask:h,toggleEditTaskWindowVisibility:E,toggleSelectedEditingTaskId:V,toggleCompleted:p},$=Object(l.b)((function(e){return{}}),Z)((function(e){var t=e.task,i=Object(n.useRef)(null),s=Object(n.useRef)(null);return Object(J.jsxs)("li",{className:"task",ref:i,children:[Object(J.jsxs)("label",{className:"task__left",htmlFor:t.id,children:[Object(J.jsx)("input",{id:t.id,type:"checkbox",checked:t.completed,onChange:function(i){e.toggleCompleted({taskId:t.id})},ref:s,hidden:!0}),Object(J.jsx)("div",{className:"task__custom-checkbox",children:t.completed?Object(J.jsx)("span",{className:"task__completed-icon material-icons",children:"done"}):Object(J.jsx)("span",{className:"task__not-completed-icon material-icons",children:"close"})}),Object(J.jsx)("span",{className:"task__text ".concat(t.completed&&"task__text--completed"),children:t.text})]}),Object(J.jsxs)("div",{className:"task__actions",children:[Object(J.jsx)("button",{type:"button",className:"task__action-btn",onClick:function(){e.toggleEditTaskWindowVisibility(),e.toggleSelectedEditingTaskId({taskId:t.id})},children:Object(J.jsx)("span",{className:"task__edit-icon material-icons",children:"edit"})}),Object(J.jsx)("button",{type:"button",className:"task__action-btn",onClick:function(){i.current.classList.add("task--scale-down"),setTimeout((function(){e.deleteTask({taskId:t.id})}),400)},children:Object(J.jsx)("span",{className:"task__delete-icon material-icons",children:"delete"})})]})]})})),ee=Object(l.b)((function(e){return{}}),{})((function(e){return Object(J.jsx)("ul",{className:"tasks",children:e.tasks.map((function(e){return Object(J.jsx)($,{task:e},e.id)}))})})),te=Object(l.b)((function(e){return{allTasks:b(e),filteredTasks:f(e,C(e),y(e))}}),{})((function(e){return Object(J.jsxs)("main",{className:"main",children:[Object(J.jsxs)("div",{className:"main__top",children:[Object(J.jsx)(Y,{}),Object(J.jsx)(Q,{})]}),Object(J.jsx)(ee,{tasks:e.filteredTasks}),0!==e.allTasks.length&&0===e.filteredTasks.length&&Object(J.jsx)("div",{className:"main__warning",children:"Not found"}),0===e.allTasks.length&&Object(J.jsx)("div",{className:"main__warning",children:"No tasks"})]})})),ie={loadTasksFromStorage:x},ne=Object(l.b)((function(e){return{}}),ie)((function(e){return Object(n.useEffect)((function(){e.loadTasksFromStorage()}),[]),Object(J.jsxs)("div",{className:"todo-list",children:[Object(J.jsx)(q,{}),Object(J.jsx)(U,{}),Object(J.jsx)(K,{}),Object(J.jsx)(te,{}),Object(J.jsx)(G,{})]})}));a.a.render(Object(J.jsx)(s.a.StrictMode,{children:Object(J.jsx)(l.a,{store:R,children:Object(J.jsx)(ne,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.dc73153a.chunk.js.map